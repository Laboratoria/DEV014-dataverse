import data from './data/dataset.js';

import { renderItems } from './view.js';

// Importar funciones
import { filterByContinent, sortBy} from './dataFunctions.js';
// import { filterByContinent, sortBy, calculateTotalFortune } from './dataFunctions.js';

// Renderizar los elementos inicilmente
let richPeopleList = document.querySelector("main").appendChild(renderItems(data));

// Referencias a elementos del DOM
const continentFilterSelect = document.getElementById('continent-filter');
const sortBySelect = document.getElementById('sort-by');
const resetButton = document.getElementById('reset-button');
//const richPeopleList = document.getElementById('rich-people-list');

// Manejador de evento para cambio en select
continentFilterSelect.addEventListener('change', () => {
  const continent = continentFilterSelect.value;
  const filteredData = filterByContinent(data, continent);
  richPeopleList.remove();
  richPeopleList = document.querySelector("main").appendChild(renderItems(filteredData));
  //updateTotalFortune(filteredData);
});

// Manejador de evento para el botón de ordenar
sortBySelect.addEventListener('change', () => {
  const [field, order] = sortBySelect.value.split('-');
  const sortedData = sortBy(filterByContinent(data,continentFilterSelect.value), field, order);
  richPeopleList.remove();
  richPeopleList = document.querySelector("main").appendChild(renderItems(sortedData));
  //updateTotalFortune(sortedData);
});

resetButton.addEventListener('click', () => {
  continentFilterSelect.value = 'Todos';
  richPeopleList.remove();
  richPeopleList = document.querySelector("main").appendChild(renderItems(data));
});
// Función para actualizar y mostrar la fortuna total
// const updateTotalFortune = (data) => {
//   const totalFortune = calculateTotalFortune(data);
//   totalFortuneElement.textContent = `Fortuna total: ${formatFortune(totalFortune)}`;
// };

